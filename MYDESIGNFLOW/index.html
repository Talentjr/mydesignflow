<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Banking App - Sign Up</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", system-ui, -apple-system, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #1a4f8e, #2b77d8);
        color: #333;
        line-height: 1.6;
        padding: 0;
        margin: 0;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .container {
        width: 100%;
        max-width: 480px;
        background: white;
        min-height: 100vh;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
        position: relative;
        overflow-x: hidden;
      }

      .onboarding-header {
        background: linear-gradient(135deg, #1a4f8e, #2b77d8);
        color: white;
        padding: 40px 20px 30px;
        text-align: center;
        border-radius: 0 0 20px 20px;
      }

      .logo {
        font-size: 32px;
        font-weight: 700;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .logo-icon {
        margin-right: 10px;
        background: white;
        color: #2b77d8;
        width: 40px;
        height: 40px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .welcome-text {
        font-size: 24px;
        font-weight: 600;
        margin: 15px 0 5px;
      }

      .subtitle {
        font-size: 16px;
        opacity: 0.9;
        margin-bottom: 30px;
      }

      .form-container {
        padding: 30px 25px;
      }

      .form-title {
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 25px;
        color: #1a4f8e;
        text-align: center;
      }

      .input-group {
        margin-bottom: 20px;
      }

      .input-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: #444;
      }

      .input-field {
        width: 100%;
        padding: 16px;
        border: 1px solid #ddd;
        border-radius: 10px;
        font-size: 16px;
        transition: border-color 0.3s;
      }

      .input-field:focus {
        border-color: #2b77d8;
        outline: none;
        box-shadow: 0 0 0 2px rgba(43, 119, 216, 0.2);
      }

      .input-field.error {
        border-color: #e74c3c;
      }

      .error-message {
        color: #e74c3c;
        font-size: 14px;
        margin-top: 5px;
        display: none;
      }

      .phone-input-container {
        display: flex;
        align-items: center;
        border: 1px solid #ddd;
        border-radius: 10px;
        overflow: hidden;
      }

      .country-code {
        padding: 0 15px;
        background: #f5f7fa;
        height: 100%;
        display: flex;
        align-items: center;
        font-weight: 500;
        border-right: 1px solid #ddd;
      }

      .phone-input {
        flex: 1;
        border: none;
        padding: 16px;
        font-size: 16px;
      }

      .phone-input:focus {
        outline: none;
      }

      .terms {
        margin: 25px 0;
        font-size: 14px;
        color: #666;
        text-align: center;
        line-height: 1.5;
      }

      .terms a {
        color: #2b77d8;
        text-decoration: none;
        font-weight: 500;
      }

      .continue-btn {
        background: #2b77d8;
        color: white;
        border: none;
        padding: 16px;
        border-radius: 10px;
        font-weight: 600;
        font-size: 16px;
        cursor: pointer;
        width: 100%;
        transition: background 0.3s;
      }

      .continue-btn:active {
        background: #1a5bb5;
      }

      .login-link {
        text-align: center;
        margin-top: 25px;
        font-size: 15px;
        color: #666;
      }

      .login-link a {
        color: #2b77d8;
        text-decoration: none;
        font-weight: 500;
      }

      .progress-bar {
        display: flex;
        justify-content: center;
        margin-top: 30px;
      }

      .progress-step {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: #ddd;
        margin: 0 5px;
      }

      .progress-step.active {
        background: #2b77d8;
      }

      .step-indicator {
        text-align: center;
        font-size: 14px;
        color: #666;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="onboarding-header">
        <div class="logo">
          <div class="logo-icon">
            <i class="fas fa-landmark"></i>
          </div>
          <span>GTWorld</span>
        </div>
        <h1 class="welcome-text">Hello!</h1>
        <p class="subtitle">
          Welcome to GTWorld!
        </p>
        <p class="subtitle">
          Enter your details to login or sign up.
        </p>        
      </div>

      <div class="form-container">
        <h2 class="form-title">Connect with your Account</h2>

        <div class="input-group">
          <label class="input-label">First Name</label>
          <input
            type="text"
            class="input-field"
            placeholder="Enter your first name"
            id="firstName"
          />
        </div>

        <div class="input-group">
          <label class="input-label">Last Name</label>
          <input
            type="text"
            class="input-field"
            placeholder="Enter your last name"
            id="lastName"
          />
        </div>

        <div class="input-group">
          <label class="input-label">Phone Number</label>
          <div class="phone-input-container">
            <div class="country-code">
  +234  <img src="https://flagcdn.com/w20/ng.png" alt="Nigeria Flag" width="25">
</div>
            <input
              type="tel"
              class="phone-input"
              placeholder="000 000 0000"
              id="phone"
            />
          </div>
        </div>

        <div class="input-group">
          <label class="input-label">Account Number</label>
          <input
            type="text"
            class="input-field"
            placeholder="Enter your account number"
            id="accountNumber"
          />
        </div>

        <div class="input-group">
          <label class="input-label">Password (6 digits)</label>
          <input
            type="password"
            class="input-field"
            id="password"
            placeholder="Enter 6-digit password"
            maxlength="6"
            inputmode="numeric"
          />
          <div class="error-message" id="passwordError">
            Password must be exactly 6 digits
          </div>
        </div>

        <div class="input-group">
          <label class="input-label">Confirm Password</label>
          <input
            type="password"
            class="input-field"
            id="confirmPassword"
            placeholder="Confirm your password"
            maxlength="6"
            inputmode="numeric"
          />
          <div class="error-message" id="confirmPasswordError">
            Passwords do not match
          </div>
        </div>

        <p class="terms">
    By providing your phone number, you agree to our 
    <a href="privacy-policy.html" class="terms-link">Privacy Policy</a> and 
    <a href="terms-of-use.html" class="terms-link">Terms of use</a>
</p>

        <button class="continue-btn" id="continueBtn">Continue</button>

        <div class="login-link">
          Already have an account? <a href="login.html">Log In</a>
        </div>

        <div class="progress-bar">
          <div class="progress-step active"></div>
          <div class="progress-step"></div>
          <div class="progress-step"></div>
        </div>
        <div class="step-indicator">Step 1 of 3</div>
      </div>
    </div>

    <script>
  document.addEventListener("DOMContentLoaded", function () {
    const phoneInput = document.querySelector(".phone-input");
    const continueBtn = document.getElementById("continueBtn");
    const passwordInput = document.getElementById("password");
    const confirmPasswordInput = document.getElementById("confirmPassword");
    const passwordError = document.getElementById("passwordError");
    const confirmPasswordError = document.getElementById("confirmPasswordError");

    // Check if user is already logged in
    checkLoginStatus();

    // Format phone number as user types
    phoneInput.addEventListener("input", function (e) {
      // Remove all non-digit characters
      let value = e.target.value.replace(/\D/g, "");

      // Format with spaces after every 3 digits
      if (value.length > 0) {
        value = value.match(new RegExp(".{1,3}", "g")).join(" ");
      }

      // Update input value
      e.target.value = value;
    });

    // Only allow numbers in password fields
    passwordInput.addEventListener("input", function (e) {
      e.target.value = e.target.value.replace(/\D/g, "");
      validatePassword();
    });

    confirmPasswordInput.addEventListener("input", function (e) {
      e.target.value = e.target.value.replace(/\D/g, "");
      validatePassword();
    });

    // Real-time password validation
    function validatePassword() {
      const password = passwordInput.value;
      const confirmPassword = confirmPasswordInput.value;

      // Validate password length
      if (password.length > 0 && password.length !== 6) {
        passwordInput.classList.add("error");
        passwordError.style.display = "block";
      } else {
        passwordInput.classList.remove("error");
        passwordError.style.display = "none";
      }

      // Validate password match
      if (confirmPassword.length > 0 && password !== confirmPassword) {
        confirmPasswordInput.classList.add("error");
        confirmPasswordError.style.display = "block";
      } else {
        confirmPasswordInput.classList.remove("error");
        confirmPasswordError.style.display = "none";
      }
    }

    // Check if user is already logged in
    function checkLoginStatus() {
      const currentUser = localStorage.getItem('currentUser');
      if (currentUser) {
        window.location.href = 'homepage.html';
      }
    }

    // Continue button validation
    continueBtn.addEventListener("click", function () {
      const firstName = document.getElementById("firstName").value;
      const lastName = document.getElementById("lastName").value;
      const phone = document.querySelector(".phone-input").value;
      const accountNumber = document.getElementById("accountNumber").value;
      const password = passwordInput.value;
      const confirmPassword = confirmPasswordInput.value;

      // Simple validation
      if (!firstName || !lastName || !phone || !accountNumber || !password || !confirmPassword) {
        alert("Please fill in all fields");
        return;
      }

      // Phone number validation (must be exactly 10 digits after country code)
      if (phone.replace(/\s/g, "").length !== 10) {
        alert("Please enter a valid 10-digit phone number (without country code)");
        return;
      }

      // Account number validation (must be exactly 10 digits)
      if (accountNumber.length !== 10) {
        alert("Please enter a valid account number (must be 10 digits)");
        return;
      }

      // Password validation
      if (password.length !== 6) {
        alert("Password must be exactly 6 digits");
        passwordInput.classList.add("error");
        passwordError.style.display = "block";
        return;
      }

      // Password match validation
      if (password !== confirmPassword) {
        alert("Password mismatch! Please make sure both passwords are the same");
        confirmPasswordInput.classList.add("error");
        confirmPasswordError.style.display = "block";
        return;
      }

      // Check if account already exists
      const users = JSON.parse(localStorage.getItem('users') || '[]');
      const existingUser = users.find(user => user.accountNumber === accountNumber);
      
      if (existingUser) {
        alert("An account with this account number already exists. Please login instead.");
        window.location.href = 'login.html';
        return;
      }

      // Save user data
      const userData = {
        firstName,
        lastName,
        phone: phone.replace(/\s/g, ""),
        accountNumber,
        password,
        balance: 124580.75, // Default balance
        transactions: []
      };

      users.push(userData);
      localStorage.setItem('users', JSON.stringify(users));
      
      // Set as current user
      localStorage.setItem('currentUser', JSON.stringify(userData));

      // If validation passes, proceed to OTP page
      window.location.href = 'otp-verification.html';
    });
  });
</script>
  </body>
</html>
